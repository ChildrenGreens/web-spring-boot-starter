= Web Starter Properties Guide
:toc: left
:toclevels: 2
:icons: font

This guide documents every configuration flag exposed through `WebStarterProperties`. Use it as a reference when tuning the
starter in your applications.

== Getting Started

All properties share the prefix `web.starter`. They can be defined in `application.properties`, `application.yml`, or environment
variables using relaxed binding rules (for example `WEB_STARTER_TRACE_ENABLED`). Most options ship with sensible defaults so you
only need to set values that differ from your organisation’s conventions.

== CORS (`web.starter.cors`)

|===
|Property |Default |Description

|`web.starter.cors.enabled`
|`true`
|Registers a global CORS mapping on Spring MVC. Disable when you manage CORS manually.

|`web.starter.cors.path-pattern`
|`/**`
|Ant-style pattern that selects the endpoints subject to the starter’s CORS rules.

|`web.starter.cors.allowed-origins`
|`*`
|List of allowed origins. Use explicit origins (e.g. `https://app.example.com`) in production.

|`web.starter.cors.allowed-headers`
|`*`
|Request headers accepted during the actual call.

|`web.starter.cors.allowed-methods`
|`*`
|HTTP methods permitted for cross-origin requests.

|`web.starter.cors.exposed-headers`
|``
|Response headers exposed to the browser. Leave empty unless front-end code must read custom headers.

|`web.starter.cors.allow-credentials`
|`false`
|Enables credentialed requests (cookies/authorization headers). Only activate when you have a trusted origin list.

|`web.starter.cors.max-age`
|`3600`
|Seconds that pre-flight responses are cached by the browser.
|===

== Trace (`web.starter.trace`)

|===
|Property |Default |Description

|`web.starter.trace.enabled`
|`true`
|Controls registration of the trace filter that enriches requests with a trace id.

|`web.starter.trace.header-name`
|`X-Trace-Id`
|Header inspected for existing trace ids and populated in responses. Align with upstream tracing infrastructure.
|===

== Logging (`web.starter.logging`)

|===
|Property |Default |Description

|`web.starter.logging.enabled`
|`true`
|Turns the request logging filter on or off.

|`web.starter.logging.include-headers`
|`false`
|When `true`, request headers are included in the structured log line.

|`web.starter.logging.max-payload-size`
|`8KB`
|Maximum number of bytes captured from request and response bodies. Payloads larger than the limit are truncated with an ellipsis.
|===

== Auth (`web.starter.auth`)

|===
|Property |Default |Description

|`web.starter.auth.enabled`
|`false`
|Turns on the `@LoginRequired` interceptor. Requires a `LoginRequirementEvaluator` bean to perform auth checks.

|`web.starter.auth.include-patterns`
|`/**`
|Path patterns guarded by the interceptor. Patterns follow the same rules as Spring MVC `HandlerInterceptor`.

|`web.starter.auth.exclude-patterns`
|``
|Paths that bypass authentication even when included above (for example health probes).
|===

== I18n (`web.starter.i18n`)

|===
|Property |Default |Description

|`web.starter.i18n.enabled`
|`true`
|Enables the message source and `Accept-Language`-aware locale resolver.

|`web.starter.i18n.base-names`
|`classpath:i18n/messages`
|Comma-separated list or YAML array pointing to message bundles.

|`web.starter.i18n.encoding`
|`UTF-8`
|Encoding used when reading message files.

|`web.starter.i18n.cache-duration`
|`PT5M`
|Duration that message bundles stay in memory before being reloaded.

|`web.starter.i18n.default-locale`
|System default
|Locale applied when the request does not declare `Accept-Language`.

|`web.starter.i18n.use-code-as-default-message`
|`true`
|When `true`, unresolved codes are returned as-is instead of throwing an exception.
|===

== Response (`web.starter.response`)


|===
|Property |Default |Description

|`web.starter.response.enabled`
|`true`
|Enables the `ResponseBodyAdvice` that wraps controller results in `ApiResponse`.

|`web.starter.response.wrap-on-null-body`
|`true`
|If set to `false`, controllers returning `null` produce HTTP 204 instead of a wrapped success payload.

|`web.starter.response.success-code`
|`0`
|Default `code` included in successful `ApiResponse` bodies.

|`web.starter.response.success-message`
|`Success`
|Default `message` for successful responses.

|`web.starter.response.default-error-code`
|`1999`
|Fallback error code when no richer error information is available.

|`web.starter.response.default-error-message`
|`Internal server error`
|Fallback error message for unexpected failures.
|===

== Jackson (`web.starter.jackson`)

|===
|Property |Default |Description

|`web.starter.jackson.write-dates-as-timestamps`
|`false`
|When `true`, dates are written as epoch timestamps instead of ISO-8601 strings.

|`web.starter.jackson.date-format`
|`yyyy-MM-dd'T'HH:mm:ss.SSSXXX`
|Date format applied to legacy date types such as `java.util.Date`.

|`web.starter.jackson.zone-id`
|`UTC`
|Time zone used when formatting dates.

|`web.starter.jackson.write-long-as-string`
|`false`
|Serialises `long` values as strings to avoid precision loss in JavaScript clients.
|===

== Putting It Together

Typical production customisations combine multiple sections:

[source,properties]
----
# Tighten CORS for a single front-end
web.starter.cors.allowed-origins=https://app.example.com
web.starter.cors.allowed-methods=GET,POST
web.starter.cors.allow-credentials=true

# Adopt your tracing standard
web.starter.trace.header-name=X-B3-TraceId

# Verbose logging only in lower environments
web.starter.logging.include-headers=true
web.starter.logging.max-payload-size=16KB

# Disable automatic wrapping for file downloads
web.starter.response.wrap-on-null-body=false
----

== IDE Assistance

The starter bundles `additional-spring-configuration-metadata.json`, so IDEs such as IntelliJ IDEA or VS Code offer
auto-completion, hover documentation, and validation for each property. Ensure the `spring-boot-configuration-processor`
dependency is on your classpath to take advantage of metadata in companion projects.
